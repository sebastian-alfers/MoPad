<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: GameCenterModel.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: GameCenterModel.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>define(["jquery", "backbone", "views/ErrorView"], function($, Backbone, ErrorView) {

    var GameCenterModel = Backbone.Model.extend({
        /**
         * @author Sebastian Alfers
         *
         * @class Model to fetch the Games from the API
         * @constructs
         *
         * GameCenterModel
         */

        defaults:{
            publicKey: null
            // TODO Aktuell kennt der view die games. das muss hier hin
        },

        /**
         * @memberof GameCenterModel
         * @member publicKey
         * @type String
         * @desc The public key for the app
         */


        /**
         * @memberof GameCenterModel
         * @function initialize
         *
         * @desc the constructor of this class
         */
        initialize: function(){
             /*
             * set up the gamecenter
             * - generate the unique key for the game instance as an identifier for the bridge
             */

            //save the scope to make it available in the AJAX-callback to throw events
            $that = this;
            $.get('http://mopad-symfony.de/mopad/api/uniqueAppToken/'+this.get('publicKey'),
                function(data) {

                    /**
                     * @memberof GameCenterModel
                     * @Event successOnGenerateUnidqueAppId
                     * @desc Throws if we got an app id / token in the session in php
                     */
                    $that.trigger('successOnGenerateUnidqueAppId', data);
            }).error(
                function(data){

                    /**
                     * @memberof GameCenterModel
                     * @Event errorOnGenerateUnidqueAppId
                     * @desc Throws if we got an error while getting the app id
                     */
                    $that.trigger('errorOnGenerateUnidqueAppId', data);

                    //render an error view
                    var error = new ErrorView({ el: $('#main_content'), message: 'Error while fetching an unique id for the app'});
                }
            );
        }
    });

    // Returns the Model class
    return GameCenterModel;

});</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="GameCenterModel.html">GameCenterModel</a></li></ul><h3>Events</h3><ul><li><a href="GameCenterModel.html#event:errorOnGenerateUnidqueAppId">errorOnGenerateUnidqueAppId</a></li><li><a href="GameCenterModel.html#event:successOnGenerateUnidqueAppId">successOnGenerateUnidqueAppId</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.1.0</a> on Mon Feb 11 2013 20:05:19 GMT+0100 (MEZ)
</footer>

<script> prettyPrint(); </script>
</body>
</html>
